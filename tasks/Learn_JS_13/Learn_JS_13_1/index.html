<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>13.1</title>
  </head>
  <body>
    <script type="module" src="./index.js"></script>
    <script type="module">
      console.log(typeof button); // object: скрипт может 'видеть' кнопку под ним
    </script>
    <script>
      console.log(typeof button); // Ошибка: кнопка не определена, скрипт не видит элементы под ним
    </script>
    <button id="button">Кнопка</button>

    <script async type="module">
      // загрузит зависимости и запустится
      // полезно когда скрипт ни с чем не связан
      import { admin } from './admin.js';
    </script>

    <!-- внешние скрипты -->
    <!-- внешние скрипты с одинаковым src запускаются только 1 раз -->
    <!-- 'our' -->
    <script type="module" src="./our.js"></script>
    <!-- ничего -->
    <script type="module" src="./our.js"></script>
    <!-- внешний скрипт с другого домена должен указывать заголовок CORS -->
    <!-- иначе скрипт не выполнится -->

    <!-- путь должен быть относительным или абсолютным -->
    <script type="module">
      // это голый модуль
      import { sayHi } from 'sayHi';
      // Uncaught TypeError: Failed to resolve module specifier "sayHi". Relative references must start with either "/", "./", or "../".
    </script>

    <!-- старые браузеры не понимают type="module" -->
    <!-- можно сделать резервный скрипт при помощи атрибута nomodule -->
  </body>
</html>
